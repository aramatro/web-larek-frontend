# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание классов

Применяется парадигма MVP.

## Слой «Модель»

### Класс `Bucket`

Управляет состоянием корзины пользователя.

Свойства:

- `productList` — массив объектов, каждый объект соответствует одному товару.
- `totalPrice` — общая сумма товаров в корзине.

Методы:

- `add(productId)` — добавляет товар в корзину.
- `remove(productId)` — удаляет товар из корзины по его идентификатору.
- `getTotalPrice()` — вычисляет сумму всех товаров в корзине.
- `getProductsCount()` — вычисляет количество товаров в корзине.
- `clear()` — удаляет все товары из корзины.

### Класс `Order`

Управляет оформлением заказа и хранит информацию о заказе.

Свойства:

- `id` — идентификатор заказа.
- `payment` — выбранный метод оплаты.
- `address` — адрес доставки.
- `email` — e-mail покупателя.
- `phone` — телефон покупателя.
- `items` — список продуктов из класса `Bucket`.
- `total` — сумма заказа.

Методы:

- `selectPaymentMethod(method)` — устанавливает выбранный способ оплаты.
- `setDeliveryAddress(address)` — сохраняет адрес доставки.
- `setCustomerInfo(email, phone)` — записывает контактные данные покупателя.
- `createOrder()` — формирует заказ.
- `validateOrder()` — проверяет валидность введенных данных.

### Класс `ApiClient`

Предназначен для взаимодействия с API и позволяет загружать данные о товарах, получать подробную информацию о конкретном товаре и отправлять заказы.

Методы:

- `fetchProducts()` — получает список товаров с сервера.
- `fetchProduct(id)` — получает информацию о товаре по идентификатору.
- `createOrder(orderData)` — отправляет на сервер запрос на создание заказа. 

## Слой «Представление»

### Класс `ProductCard`

Позволяет отображать карточки товаров.

Свойства:

- `id` — идентификатор товара.
- `description` —  описание товара.
- `image` — URL картинки товара.
- `title` — название товара.
- `category` — категория товара.
- `price` — стоимость товара или значение `null`.

Методы:

- `render()` — рендерит содержимое карточки товара.
- `handleAdd()` — обрабатывает добавление товара в корзину.
- `handleRemove()` — обрабатывает удаление товара из корзины.


### Класс `Modal`

Класс для отображения модальных окон карточки товара, корзины и подтверждения заказа.

Свойства:

- `isOpen` — состояние видимости модального окна.
- `content` — содержимое окна: данные о товаре, корзина, подтверждение заказа.

Методы:

- `openModal(content)` — открывает модальное окно для указанного `content`.
- `closeModal()` — закрывает модальное окно по нажатию на крестик.
- `closeOnOutsideClick(evt)` — закрывает модальное окно по нажатию за пределами окна.

### Класс `Form`

Класс для отображения формы ввода данных, необходимых для оформления заказа.

Свойства:

- `step` — номер шага формы заполнения заказа. На первом покупатель выбирает метод оплаты и адрес доставки, на втором указывает почту и телефон.

Методы:

- `submitStepOne(data)` — подтверждает первый шаг оформления заказа.
- `submitStepTwo(data)` — подтверждает второй шаг оформления заказа.
- `showError(message)` — выводит сообщение об ошибке, если введенные данные не прошли валидацию.
- `clear()` - очищает поля формы.

## Слой «Презентер»

Код презентера не будет выделен в отдельный класс, а будет размещен в основном скрипте приложения.